<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
<!--

body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin: 10;
    margin-right: 15px;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
    border-bottom: 1px solid #242424;
}

h1 {
    font-size: 150%;
    background-color: #b2c0ff;
}

h2 {
    background-color: #d9fbff;
    font-size: 110%;
}

h3 {
	background-color: #e6ccff;
    font-size: 80%;
}
h4 {
    background-color: #99ffcc;
    font-size: 100%;
}
#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 80%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #ccffff;
    color: #0033cc;
}
bc{
	font-family: "Arial";
	font-size: 80%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
k{
	font-family: "Arial";
	font-weight: bold;
    color: #990000;
	 
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	 
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	 
}
pre{
	font-family: "Helvetica";
	font-size: 70%;
	background-color: #fcf8c7; 
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	width: 800px;
    font-size: 18px;
}    
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}    
div.remark{
	background-color: #FFFC33;     
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}  
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

  -->
</style>
    
<head>
   
<title>Lab11ISS</title></head>
    
<body>

<div class="body"> 

<h1>72939 - LAB11 | The RobotRadar system</h1> 
<a href="http://htmlpreview.github.com/?https://github.com/anatali/iss2019Lab/blob/master/LectureBologna1819.html" target="isslm">LabISS-lectures site</a></font> 
 
 <h2>Index</h2>
 <ol>
<li><a href="#lab11req">Requirements</a></li>
<li><a href="#lab11iot">Domain (IOT)</a></li>
<li></li>
<li></li>
<li></li>
<li></li>
 </ol>
 
 
<h2><a id="lab11req"/>Requirements</h2> 
<!--
<div class="req">
Design and build a software support for the development of (<tt>IOT</tt>) applications involving one or more 
<em>Differential Drive Robots</em> (<tt>DDR</tt>). The support must help an application designer in the following tasks:
<ol>
<li><em>sendMoveCmds</em>: send commands to move a <tt>DDR</tt></li>

<li><em>receiveSensorInfo</em>: receive (and show) information from the sensors put on the DDR.
</li>
<li><em>handleEnvCond</em>: allow a robot to be sensible to environment conditions, e.g. the value of the ambient temperature,
an alarm emitted by some external entity, etc.
 </li>
<li><em>manyDDRTypes</em>: allow the usage of both virtual and real robots built with different technologies</li>
</ol>
</div>	 
-->

<div class="req">
Design and build a software systems that allows an <em>human user</em> to interact with a single <em>Differential Drive Robot</em> (<tt>DDR</tt>) 
by using a <em>remote console</em> (running on a conventional PC or on a smart device) in order to:

<ol>
<li><em>sendMoveCmds</em>: send commands to move a <tt>DDR</tt> that could be a <bc>virtual</bc> or a <bc>real robot</bc>,
with reference to the <a href="#available">resources already available</a>.</li>
<li><em>receiveSensorInfo</em>: receive information from the sensors mounted on the robot, in particular from the <bc>HC-SR04 sonar</bc>  
put on the front of the <tt>DDR</tt>. </li>
<li><em>showSensorData</em>: show data coming forn the sonar-sensor  on a radar <tt>GUI</tt>:
<br/>
<center><img src="./radarGui.png" alt="radarGui" width="20%" height="20%"/></center>
</li>
<li><em>handleConds</em>: allow the robot to <bc>stop</bc> its behavior under some specific condition, 
like for example an <b>alarm</b> emitted by some external entity, or when the <b>ambient temperature</b> overcomes a given limit value 
or when the robot <b>hits an obstacle</b>.
 </li>

</ol>
</div>

<div class="remark">
This system is intended to be a starting step towards the development of 
<a href="https://en.wikipedia.org/wiki/Internet_of_things">Internet of things</a>(<tt>IOT</tt>) applications.
See the section: <a href="#lab11iot">The Application Domain</a>
</div>
 


<h2><a id=""/>A first Requirement Analysis</h2> 

<ol>


<li>Our software system is a <bc>distributed system</bc> composed by two main entities: a <em>console</em> running on a <em>consoleNode</em> 
that can be a PC or on a SmartDevice and a (real or virtual) <em>robot</em>, running on its own <em>robotNode</em>.</li>
<li>The robot is equipped with a sonar (<em>sonar-robot</em>) put in front of it. Other sensors are, at the moment, 
excluded for costs reason.</li>
<li>To understand (or formally define) what is the meaning of the term <bc>robot</bc>, we must read
 <a href="UsingRobots2019.pdf" target="lecture">UsingRobots2019.pdf</a>. </li>
<li>The software running on the <em>consoleNode</em>  must allow the end-user to control the robot with very simple commands
(e.g. <tt>W, A, S, D, H</tt>).</li>
<li>The software running on the <em>robotNode</em> must execute the commands sent by the <em>human-user</em> via the <em>console</em> and must
be sensible to a set of conditions. Let us name, from now on, such a set with the term <em>envConds</em>.</li>
<li>The <em>envConds</em> set is actually given only with reference to examples, i.e. it is not clearly defined. However, the given examples
suggest two different type of conditions:
	<ul>
	<li>conditions related the <b>world external</b> to the system, e.g. alarms and temperature;</li>
	<li>conditions that <b>arise form the work of the system</b> itself, e.g. fining an obstacle.</li>
	</ul>
</li>
<li>It is not clear whether the <em>radarGUI</em> must be shown on the <em>console</em> or is a different system. From 
<a href="#available">resources already available</a> we can assume that we can/should use the   </li>
<li></li>
</ol>

<h2><a id=""/>Methodology</h2> 
<img src="./Scrum-framework.jpg" alt="Scrum-framework" width="70%" height="70%"/>
<br/>
<img src="./overviewScrum.jpg" alt="overviewScrum" width="100%" height="30%"/>
<!--
<br/><img src="./scrum1.png" alt="scrum1" /> <br/>-->

<h3>Basic questions</h3>
Let us recall a set of basic questions that we can pose to ourselves at the starting of each new project.
<ul>
<li><em>Top-down or bottm up?</em>What is our starting point? Do we start by what is already available (by following a bottom-up approach) or 
do we follow a top-down approach that first detects a logic architecture of the system and afterward selects
the technology? </li>
<li><em>Incremental development</em>Is it possible to organize the production in terms of a sequence of systems, each facing a more wide/complex
set of requirements so that each system can be designed and built as the evolution of the previous one?</li>
<li><em>Requirement sequencing</em>Is it possible to order the set of requirements into a list of increasing complexity and to harmonize such a list
with the <bc>product backlog</bc> defined by our <tt>product-owner</tt>? </li>
</ul>

<h3>Technology (in)dependency and modeling</h3>
In the first phase of our development, we want to be <em>technology-aware</em> but also as much technology-independent
as possible. To achieve such a goal, we will start by building a <em>conceptual model</em> of the system. From
<a href="https://en.wikipedia.org/wiki/Systems_modeling" target="code">https://en.wikipedia.org/wiki/Systems_modeling</a>
we read:
<div class="remark">
A model is a representation of a system, made of the composition of concepts which are used to help
people know, understand, or simulate a subject the model represents.
</div>

<h3>A Product Backlog</h3>
According to the <em>SCRUM</em> framework of software development, we will suppose that the product backlog defined
by the <tt>Product Owner</tt> allows us to satisfy the set of requirements in incremental way, by distinguishing among a
set of macro-steps. For example, we could define the sequence reported in the following sections.

<ol>
<li>The first step defines the main components of the logic architecture of the systems, by focusing on their
interaction. In this phase, the behavior of each component should be simply 'simulated' in order to reproduce a set of
interaction patterns, with the aim to introduce a proper set of initial (integration, functional) Test-Plans.</li>
<li>Refine the logical architecture defined in the previous step by including code that satisfies more functional requirements .</li>

</ol>

<h3 id="available">Resources already available</h3>
Our company (Unibo) has already developed:
<ul>
<li>A basic robot control software for physical ddr robots (BaseRobot), modelled as an observable POJO.
See <a href="UsingRobots2019.pdf" target="lecture">UsingRobots2019.pdf</a>.</li>
<li>A software system written in Java that simulates the screen of a radar. 
The project  it.unibo.java.radar implements a software system able to display distance values on an output device 
that simulates the screen of a radar.  The deployment file is   radarPojo.jar .

 </li>
<li>A IOT envelope (called mbot) of the BaseRobot that allows us to send commands on the network to a real
robot built upon a mBot robot.</li>
<li>A virtual environment (named W-Env) built in JavaScript, that includes a virtual robot that accepts commands 
sent on a TCP connection on port 8999</li>
<li>A front-end system written in Node that provides a user interface and support for user-authentication.</li>
</ul>
Of course, we will - sooner or later - use as much as possible the (hopefully corrected or at least tested) software
that our company has already built in the IOT domain. The intent however is to avoid the a-priori introduction of
such a software. Rather, our aim is to introduce proper available software libraries, infrastructures, components
etc. as the proper consequence of our problem analysis or of our design choices. In other words, we will not
start from any available software, with the intent to 'discover its applicability' to our needs.

<h2><a id=""/>Problem analysis</h2> 

<ol>


<li>Our software system is a <bc>distributed system</bc> composed by two main entities: a <em>console</em> running on a <em>consoleNode</em> 
that can be a PC or on a SmartDevice and a (real or virtual) <em>robot</em>, running on its own <em>robotNode</em>.</li>
<li>To understand (or fomally define) what is the meaning of the term <bc>robot</bc>, we must read
 <a href="UsingRobots2019.pdf" target="lecture">UsingRobots2019.pdf</a>. </li>
<li>The robot is equipped with a sonar (<em>sonar-robot</em>) put in front of it. Other sensors are, at the moment, 
excluded for costs reason.</li>
<li>The software running on the <em>consoleNode</em>  must allow the end-user to control the robot with very simple commands
(e.g. <tt>W, A, S, D, H</tt>).</li>
<li>The software running on the <em>robotNode</em> must execute the commands sent by the <em>human-user</em> via the <em>console</em> and must
be sensible to a set of conditions. Let us name, from now on, such a set with the term <em>envConds</em>.</li>
<li></li>
<li></li>
<li></li>
</ol>
<h3><a id=""/>A first Architecture</h3>
Our first step consists in defining the overall system architecture in a technology-independent way.

 

At this stage, the system can be represented as in the following, informal picture:
 

<h3><a id=""/>Logical Architecture</h3>
For <em>logical architecture</em> we intend here a software architecture that is defined as consequence of the
problem analysis phase, in the attempt to focus our attention on the problem itself, rather than on some specific
technology. We say that, during problem analysis, we are technology aware but not technology dependent.
<br/><br/>
The logical architecture will be progressively defined in more detailed way in order to define a project architecture
and a proper implementation and deployment.
<br/><br/>
The incremental approach will lead us to define a sequence of (QActor) models, that can be used as the reference
point for a sequence of SPRINT, in SCRUM terminology.

<center><table style="width:98%">
<tbody>	
<tr>
<td style="width:55%">
<img src="./robotRadar0.png" alt="robotRadar0" width="100%" height="30%"/>
<br/>

 
</td>
<td>
<m>
</m>
</td>
 </tr>
 </table>
</center>

<h2><a id=""/>Project</h2> 
<h3><a id=""/>Project Architecture</h3>
<center><table style="width:98%">
<tbody>	
<tr>
<td style="width:55%">
<img src="./robotRadar0.png" alt="robotRadar0" width="100%" height="30%"/>
 
</td>
<td>
<m>
<ul>
<li>Frontend Model: <a href="../src/frontend.qak" target="code">frontend.qak</a></li>
<li>Robot Model: <a href="../src/robotWorker.qak" target="code">robotWorker.qak</a></li>
<li>Radar Model: <a href="../src/radar.qak" target="code">radar.qak</a></li>
</ul>
</m>
</td>
 </tr>
 
 <tr>
<td>
<img src="./robotWorker.png" alt="robotWorker" width="100%" height="30%"/>
 
</td>
<td>
<m>
Robot Model: <a href="../src/robotWorker.qak" target="code">robotWorker.qak</a>
<ul>
<li><bc>player</bc>:  handles <tt>robotCmd</tt> to move the robot and sends <tt>usercmd</tt> to <bc>mind</bc>
for the application logic.</li>
<li><bc>mind</bc>: executes the robot work (application logic) by sending <tt>robotCmd</tt> to <bc>player</bc> </li>
<li>sonarhandler: handles  <tt>sonar</tt> and sends <tt>polat</tt> to <bc>radar</bc>.  </li>
</ul>
</m>
</td>
 </tr>
 
 
</table>
</center>
 
<h2><a id="lab11iot"/>The Application Domain</h2> 

<img src="./iot3.png" alt="iot0" width="100%" height="100%"/>
<!-- <img src="./iot3.jpg" alt="iot0" width="70%" height="70%"/> -->
<img src="./iot0.png" alt="iot0" width="70%" height="70%"/>
<img src="./iotRobot.png" alt="iotRobot" width="60%" height="60%"/>




</div>
<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:center;font-size:small;color:white">
By AN Unibo-DISI    
</div> 
</body>
</html>